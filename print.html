<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Ziku Docs</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Getting Started</li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.</strong> Install</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> Configure</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Examples</div></li><li class="chapter-item expanded affix "><li class="part-title">Core Concepts</li><li class="chapter-item expanded "><a href="networking/networking.html"><strong aria-hidden="true">4.</strong> Networking</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="networking/multilayer_networks.html"><strong aria-hidden="true">4.1.</strong> Multilayer Networks</a></li><li class="chapter-item expanded "><a href="networking/overlay_network.html"><strong aria-hidden="true">4.2.</strong> Overlay Network</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="networking/distributed_hash_tables.html"><strong aria-hidden="true">4.2.1.</strong> Distributed Hash Tables</a></li><li class="chapter-item expanded "><a href="networking/membership_protocol.html"><strong aria-hidden="true">4.2.2.</strong> Membership Protocol</a></li></ol></li><li class="chapter-item expanded "><a href="networking/peer_routing.html"><strong aria-hidden="true">4.3.</strong> Peer Routing</a></li><li class="chapter-item expanded "><a href="networking/message_dissemination.html"><strong aria-hidden="true">4.4.</strong> Message Dissemination</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Organization</li><li class="chapter-item expanded "><a href="governance.html"><strong aria-hidden="true">5.</strong> Governance</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Ziku Docs</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="networking"><a class="header" href="#networking">Networking</a></h1>
<p>Ziku P2P is meant to be the ground layer of a global <a href="networking/multilayer_networks.html">multilayer network</a> where other applications can build on top of the existing network (creating a new overlay network layer).</p>
<p>Applications can opt on:</p>
<ul>
<li>Using the same protocols of Ziku P2P</li>
<li>Using custom protocols (e.g. routing, message dissemination), while getting the benefits of Ziku P2P</li>
</ul>
<h2 id="benefits-of-ziku-p2p"><a class="header" href="#benefits-of-ziku-p2p">Benefits of Ziku P2P</a></h2>
<p>Being a global network, peers can </p>
<h2 id=""><a class="header" href="#"></a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="multilayer-networks"><a class="header" href="#multilayer-networks">Multilayer Networks</a></h1>
<p>Multilayer networks are networks with multiple kinds of relations<sup class="footnote-reference"><a href="#1">1</a></sup>.</p>
<p>Each application built on top of Ziku is one layer, ensuring that the application messages are not routed through peers that are not related with the application.</p>
<figure>
<img style="display:block;margin:0 auto;" src="networking/../images/networking_multilayer.png">
<figcaption align = "center">Image 1</figcaption>
</figure>
<p>Image 1 represents a multilayer network with 3 layers. All nodes are represented in all layers, even if they do not use the application that is represented in that layer (i.e. they don't have any connection to other nodes in that layer).</p>
<figure>
<table><thead><tr><th>Application</th><th>Layer</th><th>Nodes</th></tr></thead><tbody>
<tr><td>Ziku P2P</td><td>Layer 0</td><td><span style="color:#cbb481">Y</span>, <span style="color:#7c8ba2">B</span>, <span style="color:#94a989">G</span>, <span style="color:#976866">R</span></td></tr>
<tr><td>App1</td><td>Layer 1</td><td><span style="color:#7c8ba2">B</span>, <span style="color:#94a989">G</span>, <span style="color:#976866">R</span></td></tr>
<tr><td>App2</td><td>Layer	2</td><td><span style="color:#cbb481">Y</span>, <span style="color:#94a989">G</span>, <span style="color:#976866">R</span></td></tr>
</tbody></table>
<figcaption align = "center">Table 1</figcaption>
</figure>
<p>Table 1 specifies the applications, the layers and the participating nodes for Image 1.</p>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p><a href="https://journals.aps.org/prx/abstract/10.1103/PhysRevX.3.041022">De Domenico, M.; Solé-Ribalta, A.; Cozzo, E.; Kivelä, M.; Moreno, Y.; Porter, M.; Gómez, S.; Arenas, A. (2013). &quot;Mathematical Formulation of Multilayer Networks&quot;</a></p>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="overlay-network"><a class="header" href="#overlay-network">Overlay Network</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="distributed-hash-tables-dhts"><a class="header" href="#distributed-hash-tables-dhts">Distributed Hash Tables (DHTs)</a></h1>
<p>A Distributed Hash Table (DHT) is an example of a structured overlay network.
They are a distributed system that enables the same lookup features as a Hash Table, mapping keys to values.</p>
<p>These systems usually are used to store content over the network, so, they are also used as a content routing system, for data discovery and retrieval in the network.</p>
<p>Ziku network does not use any DHT protocol, since it does not intend to store content over the network (all the future storage needs will be delegated to IPFS).</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="membership-protocol"><a class="header" href="#membership-protocol">Membership Protocol</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="peer-routing"><a class="header" href="#peer-routing">Peer Routing</a></h1>
<p>Peer routing consists on the discovery (and connectivity) between peers in the network.
This is usually done on structured overlay networks by knowing that every peer in the system stores other peers with the best identifiers for routing in the network. You can check Chord<sup class="footnote-reference"><a href="#1">1</a></sup> or Kademlia<sup class="footnote-reference"><a href="#2">2</a></sup> as an example.</p>
<p>Ziku provides a novel peer routing strategy for unstructured overlay networks.</p>
<p>When a node wants to send a message, or wants to connect, to another node in the network (which it only knows the immutable node identifier).
It sends a routed message to the peers that have the lowest hamming distance<sup class="footnote-reference"><a href="#3">3</a></sup> between their node identifiers and the destination node identifier.
There is also the condition that the hamming distance of the peer should be lower than the hamming distance of the node which is sending the message to the destination node.</p>
<p>This process repeats in each hop.
You can see the strategy in pseudocode 1.</p>
<figure>
<pre><code>State:
	nodeId	// node identifier
	peers	// set of peers

	Upon receiveRoutedMsg(dest, msg):
		If (nodeId = dest) then:
			Trigger processMsg(msg)
			return

		Foreach p ∈ peers do:
			self_distance ← hamming_distance(nodeId, dest)
			distance ← hamming_distance(p.nodeId, dest)

			If self_distance &lt; distance then:
				continue
			Else If distance = 0 then:
				Trigger sendRoutedMsg(p, dest, msg)
				return
			Else:
				Trigger sendRoutedMsg(p, dest, msg)

	Upon sendRoutedMsg(peer, dest, msg):
		...

	Upon processMsg(msg):
		...
</code></pre>
<figcaption align = "center">Pseudocode 1</figcaption>
</figure>
<p>In our <a href="networking/./overlay_network.html">overlay network</a>, nodes try to optimize for latency and hamming distance, thus, nodes will tend to have peers that have a small hamming distance. Apart from that, due to the <a href="networking/./multilayer_networks.html">multilayer network</a> approach, we also have random peers (from other applications) that might have lower hamming distances.</p>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p><a href="https://dl.acm.org/doi/10.1145/964723.383071">Stoica, I.; Morris, R.; Kaashoek, M. F.; Balakrishnan, H. (2001). &quot;Chord: A scalable peer-to-peer lookup service for internet applications&quot;</a></p>
</div>
<div class="footnote-definition" id="2"><sup class="footnote-definition-label">2</sup>
<p><a href="https://link.springer.com/chapter/10.1007/3-540-45748-8_5">Maymounkov, P.; Mazières, D. (2002). &quot;Kademlia: A Peer-to-Peer Information System Based on the XOR Metric&quot;</a></p>
</div>
<div class="footnote-definition" id="3"><sup class="footnote-definition-label">3</sup>
<p><a href="https://ieeexplore.ieee.org/document/6772729">Hamming, R. W. (1950). &quot;Error detecting and error correcting codes&quot;</a></p>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="message-dissemination"><a class="header" href="#message-dissemination">Message Dissemination</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="governance"><a class="header" href="#governance">Governance</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
